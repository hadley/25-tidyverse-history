<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hadley Wickham">
<meta name="dcterms.date" content="2025-01-27">

<title>A personal history of the tidyverse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-2ecafa609d29e6b5df2c2179b389d5c3.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">


<meta name="citation_title" content="A personal history of the tidyverse">
<meta name="citation_author" content="Hadley Wickham">
<meta name="citation_publication_date" content="2025-01-27">
<meta name="citation_cover_date" content="2025-01-27">
<meta name="citation_year" content="2025">
<meta name="citation_online_date" content="2025-01-27">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Tidy data;,citation_abstract=A huge amount of effort is spent cleaning data to get it ready for analysis, but there has been little research on how to make data cleaning as easy and effective as possible. This paper tackles a small, but important, component of data cleaning: data tidying. Tidy datasets are easy to manipulate, model and visualize, and have a specific structure: each variable is a column, each observation is a row, and each type of observational unit is a table. This framework makes it easy to tidy messy datasets because only a small set of tools are needed to deal with a wide range of un-tidy datasets. This structure also makes it easier to develop tidy tools for data analysis, tools that both input and output tidy datasets. The advantages of a consistent data structure and matching tools are demonstrated with a case study free from mundane data manipulation chores.;,citation_author=Hadley Wickham;,citation_publication_date=2014;,citation_cover_date=2014;,citation_year=2014;,citation_fulltext_html_url=https://www.jstatsoft.org/index.php/jss/article/view/v059i10;,citation_issue=10;,citation_doi=10.18637/jss.v059.i10;,citation_volume=59;,citation_journal_title=Journal of Statistical Software;">
<meta name="citation_reference" content="citation_title=Welcome to the tidyverse;,citation_author=Hadley Wickham;,citation_author=Mara Averick;,citation_author=Jennifer Bryan;,citation_author=Winston Chang;,citation_author=Lucy D’Agostino McGowan;,citation_author=Romain François;,citation_author=Garrett Grolemund;,citation_author=Alex Hayes;,citation_author=Lionel Henry;,citation_author=Jim Hester;,citation_author=Max Kuhn;,citation_author=Thomas Lin Pedersen;,citation_author=Evan Miller;,citation_author=Stephan Milton Bache;,citation_author=Kirill Müller;,citation_author=Jeroen Ooms;,citation_author=David Robinson;,citation_author=Dana Paige Seidel;,citation_author=Vitalie Spinu;,citation_author=Kohske Takahashi;,citation_author=Davis Vaughan;,citation_author=Claus Wilke;,citation_author=Kara Woo;,citation_author=Hiroaki Yutani;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://doi.org/10.21105/joss.01686;,citation_issue=43;,citation_doi=10.21105/joss.01686;,citation_volume=4;,citation_journal_title=Journal of Open Source Software;,citation_publisher=The Open Journal;">
<meta name="citation_reference" content="citation_title=Lattice: Multivariate data visualization with r;,citation_author=Deepayan Sarkar;,citation_publication_date=2008;,citation_cover_date=2008;,citation_year=2008;,citation_fulltext_html_url=http://lmdvr.r-forge.r-project.org;,citation_isbn=978-0-387-75968-5;">
<meta name="citation_reference" content="citation_title=The grammar of graphics;,citation_author=Leland Wilkinson;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;">
<meta name="citation_reference" content="citation_title=Dates and times made easy with lubridate;,citation_author=Garrett Grolemund;,citation_author=Hadley Wickham;,citation_publication_date=2011;,citation_cover_date=2011;,citation_year=2011;,citation_fulltext_html_url=https://www.jstatsoft.org/v40/i03/;,citation_issue=3;,citation_volume=40;,citation_journal_title=Journal of Statistical Software;">
<meta name="citation_reference" content="citation_title=R for data science;,citation_author=Hadley Wickham;,citation_author=Garrett Grolemund;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;">
<meta name="citation_reference" content="citation_title=R for data science;,citation_author=Hadley Wickham;,citation_author=Mine Çetinkaya-Rundel;,citation_author=Garrett Grolemund;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">A personal history of the tidyverse</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
        
        <div class="quarto-title-meta">

                <div>
            <div class="quarto-title-meta-heading">Author</div>
            <div class="quarto-title-meta-contents">
                        <p>Hadley Wickham </p>
                      </div>
          </div>
                
                <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">January 27, 2025</p>
            </div>
          </div>
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      <div class="quarto-alternate-formats"><div class="quarto-title-meta-heading">Other Formats</div><div class="quarto-title-meta-contents"><p><a href="index.pdf"><i class="bi bi-file-pdf"></i>Typst</a></p></div></div></div>
    </div>



    <div class="quarto-other-links-text-target">
    <div class="quarto-code-links"><div class="quarto-title-meta-heading">Code Links</div><div class="quarto-title-meta-contents"><span><a href="https://github.com/hadley/25-tidyverse-history/" target="_blank"><i class="bi bi-github"></i>GitHub Repo</a></span></div></div></div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#before-the-tidyverse" id="toc-before-the-tidyverse" class="nav-link" data-scroll-target="#before-the-tidyverse">Before the tidyverse</a>
  <ul class="collapse">
  <li><a href="#growing-up" id="toc-growing-up" class="nav-link" data-scroll-target="#growing-up">Growing up</a></li>
  <li><a href="#phd-2004-2008" id="toc-phd-2004-2008" class="nav-link" data-scroll-target="#phd-2004-2008">PhD (2004-2008)</a></li>
  <li><a href="#rice-university-2008-2012" id="toc-rice-university-2008-2012" class="nav-link" data-scroll-target="#rice-university-2008-2012">Rice University (2008-2012)</a></li>
  <li><a href="#rstudio-2012-" id="toc-rstudio-2012-" class="nav-link" data-scroll-target="#rstudio-2012-">RStudio (2012-)</a></li>
  </ul></li>
  <li><a href="#the-early-days" id="toc-the-early-days" class="nav-link" data-scroll-target="#the-early-days">The early days</a>
  <ul class="collapse">
  <li><a href="#naming-the-tidyverse" id="toc-naming-the-tidyverse" class="nav-link" data-scroll-target="#naming-the-tidyverse">Naming the tidyverse</a></li>
  <li><a href="#defining-the-tidyverse" id="toc-defining-the-tidyverse" class="nav-link" data-scroll-target="#defining-the-tidyverse">Defining the tidyverse</a></li>
  <li><a href="#learning" id="toc-learning" class="nav-link" data-scroll-target="#learning">Learning</a></li>
  </ul></li>
  <li><a href="#key-innovations" id="toc-key-innovations" class="nav-link" data-scroll-target="#key-innovations">Key innovations</a>
  <ul class="collapse">
  <li><a href="#tidy-data" id="toc-tidy-data" class="nav-link" data-scroll-target="#tidy-data">Tidy data</a></li>
  <li><a href="#tibbles" id="toc-tibbles" class="nav-link" data-scroll-target="#tibbles">tibbles</a></li>
  <li><a href="#the-pipe" id="toc-the-pipe" class="nav-link" data-scroll-target="#the-pipe">The pipe</a></li>
  <li><a href="#sec-tidy-eval" id="toc-sec-tidy-eval" class="nav-link" data-scroll-target="#sec-tidy-eval">Tidy evaluation</a></li>
  <li><a href="#hex-logos" id="toc-hex-logos" class="nav-link" data-scroll-target="#hex-logos">Hex logos</a></li>
  </ul></li>
  <li><a href="#the-tidyverse-at-posit" id="toc-the-tidyverse-at-posit" class="nav-link" data-scroll-target="#the-tidyverse-at-posit">The tidyverse at Posit</a>
  <ul class="collapse">
  <li><a href="#tidymodels" id="toc-tidymodels" class="nav-link" data-scroll-target="#tidymodels">tidymodels</a></li>
  </ul></li>
  <li><a href="#tidyverse-community" id="toc-tidyverse-community" class="nav-link" data-scroll-target="#tidyverse-community">Tidyverse community</a>
  <ul class="collapse">
  <li><a href="#social-media-and-community-spaces" id="toc-social-media-and-community-spaces" class="nav-link" data-scroll-target="#social-media-and-community-spaces">Social media and community spaces</a></li>
  <li><a href="#community-contributors" id="toc-community-contributors" class="nav-link" data-scroll-target="#community-contributors">Community contributors</a></li>
  </ul></li>
  <li><a href="#maintaining-the-tidyverse" id="toc-maintaining-the-tidyverse" class="nav-link" data-scroll-target="#maintaining-the-tidyverse">Maintaining the tidyverse</a></li>
  <li><a href="#whats-next" id="toc-whats-next" class="nav-link" data-scroll-target="#whats-next">What’s next?</a></li>
  </ul>
<div class="quarto-alternate-notebooks"><h2>Notebooks</h2><ul><li><a href="index-preview.html"><i class="bi bi-journal-code"></i>Article Notebook</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Unlike our universe, the <a href="https://www.tidyverse.org/">tidyverse</a> didn’t start with a big bang, but rather emerged through a gradual accumulation of packages that eventually coalesced into something greater than the sum of its parts. In this paper, I’ll trace this evolution from my perspective, beginning with the early influences that sparked the first proto-tidyverse packages and following their development into a cohesive ecosystem. I’ll explore the defining features that make the tidyverse unique, highlight the contributions that I’m most proud of, and examine how it grew from an individual project into a collaborative effort supported by both a team at Posit and a vibrant community. Finally, I’ll reflect on where the tidyverse stands today and share my vision for its future.</p>
<p>This article summarises almost 20 years of package development encompassing over 500 releases of 26 packages. That means this write-up is necessarily abbreviated and when coupled with my fallible memory, that means I’ve almost certainly forgotten some important details. If you spot any important omissions, please <a href="https://github.com/hadley/25-tidyverse-history/issues">let me know</a> so I can fix it!</p>
</section>
<section id="before-the-tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="before-the-tidyverse">Before the tidyverse</h2>
<p>While the tidyverse was named in 2016, most of the packages that made it up were created earlier, as summarised by <a href="#fig-first-releases" class="quarto-xref">Figure&nbsp;1</a>. In this section, I’ll explore how the tidyverse came to be, a journey that’s inextricably tied to to the course of my career. I’ll begin the story with a couple of formative experiences growing up, then continue to my PhD where I created reshape and ggplot. Next we’ll move onto my professional career, first at Rice University where teaching forced my ideas to become more concrete and accessible, and then to RStudio (now Posit) where I was given the freedom and resources to dive deep in package development.</p>
<div id="cell-fig-first-releases" class="cell">
<div class="cell-output-display">
<div id="fig-first-releases" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A dot plot with time on the x-axis (spanning 2006 to 2024) and different R packages on the y-axis. Each row represents a different package including tidyverse and proto-tidyverse packages like reshape, ggplot, ggplot2, plyr, and dplyr. Each dot represents a package release. The first release is coloured black, and all subsequent releases are coloured grey.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-first-releases-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-first-releases-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figure&nbsp;1: Initial releases of tidyverse packages and important precursors. The vertical line indicates the release of the tidyverse package. Core tidyverse packages appear in bold in the y-axis labels."><img src="index_files/figure-html/fig-first-releases-1.png" class="img-fluid figure-img" alt="A dot plot with time on the x-axis (spanning 2006 to 2024) and different R packages on the y-axis. Each row represents a different package including tidyverse and proto-tidyverse packages like reshape, ggplot, ggplot2, plyr, and dplyr. Each dot represents a package release. The first release is coloured black, and all subsequent releases are coloured grey." width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-first-releases-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Initial releases of tidyverse packages and important precursors. The vertical line indicates the release of the tidyverse package. Core tidyverse packages appear in bold in the y-axis labels.
</figcaption>
</figure>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-1" href="index-preview.html#cell-fig-first-releases">Source: Article Notebook</a></div>
<section id="growing-up" class="level3">
<h3 class="anchored" data-anchor-id="growing-up">Growing up</h3>
<p>Growing up, I was very lucky to have access to computers from a very early age, thanks to my dad<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, and this led to an general interest in computers and programming. My dad’s work involved databases, so I was lucky to have deep conversations about relational database design and Codd’s third normal form much in earlier in life than usual. That led to a lot of playing around in Microsoft Access, a desktop DBMS, and to an eventual part-time job developing databases. This work was invaluable when I later came to wrestle with the data needed to fit statistical models.</p>
<p>From my mum I learned that you don’t need to ask permission to do good in the world<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. This meant that when I encountered data analysis problems that I thought I could solve, I felt empowered to not only solve them, but share my solutions with the world. From both my parents I gained the conviction those with many resources have a moral obligation to help those with less, which made it natural for those solutions to enter the world as open source software.</p>
<p>The final formative experience prior to my PhD was my undergraduate statistics degree at the University of Auckland, the birthplace of R. Unsurprisingly, many of my courses were taught using R, which meant that I started using R in 2003, at version 1.6.2. It’s fun to look back at my <a href="https://gist.github.com/hadley/83125e3a427073438fdd903e320dd317">earliest R code</a>: the files use a <code>.txt</code> extension, mix <code>=</code> and <code>&lt;-</code> for assignment, and use very inconsistent spacing.</p>
</section>
<section id="phd-2004-2008" class="level3">
<h3 class="anchored" data-anchor-id="phd-2004-2008">PhD (2004-2008)</h3>
<p>My undergraduate left me with a desire to learn more about statistics, and since my Dad had done his PhD at Cornell University, it seemed quite reasonable to look to the US to do my PhD. This lead me to Iowa State University (ISU) and my major advisers Dianne Cook and Heike Hofmann.</p>
<p>At ISU, I was lucky enough to get a consulting assistantship with the Agricultural Experiment Station, where I helped PhD students in other departments do their analyses. This work lead me to face two challenges that remain with me today:</p>
<ul>
<li><p>The hardest part of collaborative data analysis is not finding the correct statistical model, but getting the data into that a form that you can actually work with. This challenge led to the creation of the <a href="http://had.co.nz/reshape/">reshape package</a> which made it easier to work with a variety of input datasets by first converting to a “molten” form which you could then “cast” into the desired form<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p></li>
<li><p>I often found it hard to translate the plots that I pictured in my head into code using either base or lattice <span class="citation" data-cites="lattice">(<a href="#ref-lattice" role="doc-biblioref">Sarkar 2008</a>)</span> graphics. At the same time I was reading the The Grammar of Graphics <span class="citation" data-cites="grammar-of-graphics">(<a href="#ref-grammar-of-graphics" role="doc-biblioref">Wilkinson 2012</a>)</span> and found its theory of visualisation to be very compelling. But the only implementation available at the time was very expensive, so I decided I’d have a go at creating my own in R. That led to ggplot and later ggplot2. I was very lucky to meet Lee Wilkinson who was tremendously supportive on my work<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p></li>
</ul>
<p>This work wouldn’t have been possible without Di and Heike, who let me work on what <strong>I</strong> thought was most important<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>, regardless of whether or not it fit the mold of a traditional statistics PhD. They also provided air-cover for me when I let my disdain for the utility of theoretical statistics shine a little too clearly, making it harder than necessary to complete the more traditional components of my PhD. My work at ISU culminated in my thesis “<a href="http://had.co.nz/thesis/practical-tools-hadley-wickham.pdf">Practical tools for exploring data and models</a>”, a write-up of the collection of R packages I had begun to amass and the ideas that underpinned them.</p>
</section>
<section id="rice-university-2008-2012" class="level3">
<h3 class="anchored" data-anchor-id="rice-university-2008-2012">Rice University (2008-2012)</h3>
<p>After graduating from ISU, I got a job at Rice University. Here my most formative experience was teaching <a href="http://stat405.had.co.nz">Stat405</a>, “Introduction to Data Analysis”<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>. I taught this class four times (2009-2012) and found the experience of repeatedly teaching the same topics to new students to be extremely useful. It helped me to discover topics that students found hard to understand and tools that they found hard to use, and I could see the impact of my improvements to teaching and tooling from year-to-year. This led to the creation of the <a href="https://stringr.tidyverse.org">stringr</a> (2009) and <a href="https://lubridate.tidyverse.org">lubridate</a> (2010, with Garrett Grolemund) packages as I discovered that many students struggled to master the special cases of string and date-time manipulation in base R. It also catalysed my work on tidy data and group-wise manipulation that led to the tidyr and dplyr packages which I’ll discuss in the next section.</p>
<p>Throughout this time, the popularity of ggplot2 continued to rise, and I manage to carve out time to work on it, despite it not being considered research and thus not valued by my department. But my interactions with the community kept me motivated and continued to reinforce my belief that open source software development was valuable because it empowered others to do better data analysis. During this time I started work with Garrett Grolemund, as my PhD student, and Winston Chang, as a contractor. Most importantly for the the tidyverse, Garrett developed lubridate <span class="citation" data-cites="lubridate">(<a href="#ref-lubridate" role="doc-biblioref">Grolemund and Wickham 2011</a>)</span> and Winston worked on ggplot2, implementing new geoms like <code>geom_dotplot()</code> and <code>geom_violin()</code>, as well as important infrastructure like the theme and the underlying objected orient programming systems. I’m lucky to still have Garret and Winston as my colleagues at Posit.</p>
<p>During my time at Rice I had very little success with grants. I had a hard time packaging my work in a way that the people reviewing statistics grants at the NSF could make sense of, despite my absolute conviction that this work was important. I was fortunate to get a couple of small grants from BD (a medical technology company) and Google to my work on plyr, reshape, and ggplot2, but these were nowhere near the amount of money I was expected to bring in. A paragraph from a final report to BD highlights my thinking at the time:</p>
<blockquote class="blockquote">
<p>The generous support of BD has allowed me to implement many performance improvements to plyr, reshape and ggplot2, and begin work on the next generation of interactive graphics. Without such support, it is difficult for me to spend time on these projects as they do not directly contribute to my research portfolio. Your support not only gives me the financial backing to pursue these important optimisations, but also sends a strong signal to the statistics community that this work is important.</p>
</blockquote>
<p>I also worked tooling for package development, despite it similarly lacking any “research” merit. Because I was developing quite a few packages, it made sense to invest in tooling that helped me develop more reliable software in less time. This led to the creation of the testthat (2009) and devtools (2011) packages, and taking over maintenance of the roxygen2 package<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> (2011).</p>
</section>
<section id="rstudio-2012-" class="level3">
<h3 class="anchored" data-anchor-id="rstudio-2012-">RStudio (2012-)</h3>
<p>In 2012, I left Rice for RStudio (now Posit), moving to a position where the practice of software engineering was valued and I no longer needed to produce papers or find grant money. This gave me the time and freedom to learn C++, an important tool needed for writing high performance code and binding R to existing C/C++ libraries. I was very lucky to be mentored by JJ Allaire which allowed my C++ skills to grow rapidly. Overall, my first few years at RStudio led to an explosion of new packages because I had both the time to work on what I thought was important and the ability to invest in programming skills that were not valued in academia.</p>
<p>The most important new package was dplyr. dplyr grew from my dissatisfaction using the plyr package to solve various grouped data frame problems. These problems tended to be simple to explain but hard to solve using existing tools. For example, you have the babynames dataset and want to figure out the rank of each name, within each combination of sex and year. Solving that problem required <code>plyr::ddply()</code>, where the <code>dd</code> prefix indicates that both the input and output are data frames. <code>ddply()</code> has three arguments: the input data frame to work, how to split it up (by year and sex variables) and what we want to do to each piece (mutate it).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>ranked <span class="ot">&lt;-</span> plyr<span class="sc">::</span><span class="fu">ddply</span>(babynames, <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"sex"</span>), <span class="cf">function</span>(df) {</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  plyr<span class="sc">::</span><span class="fu">mutate</span>(df, <span class="at">rank =</span> <span class="fu">rank</span>(<span class="sc">-</span>n))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ranked, <span class="dv">10</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    year sex      name    n       prop rank</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  1880   F      Mary 7065 0.07238359    1</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  1880   F      Anna 2604 0.02667896    2</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  1880   F      Emma 2003 0.02052149    3</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  1880   F Elizabeth 1939 0.01986579    4</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  1880   F    Minnie 1746 0.01788843    5</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  1880   F  Margaret 1578 0.01616720    6</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  1880   F       Ida 1472 0.01508119    7</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  1880   F     Alice 1414 0.01448696    8</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  1880   F    Bertha 1320 0.01352390    9</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1880   F     Sarah 1288 0.01319605   10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This code is unappealing for new users because it requires that understand functions and the basics of functional programming. This means that if you’re teaching R, you can’t teach it until later in the semester, even though the underlying task is straightforward and is something you want to be able to do early in your data analysis journey.</p>
<p>The creation of dplyr allowed you to instead write code like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">|&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, sex) <span class="sc">|&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">rank</span>(<span class="fu">desc</span>(n)))</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1,924,665 × 6</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   year, sex [276]</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     year sex   name          n   prop  rank</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1  1880 F     Mary       7065 0.0724     1</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2  1880 F     Anna       2604 0.0267     2</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3  1880 F     Emma       2003 0.0205     3</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4  1880 F     Elizabeth  1939 0.0199     4</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5  1880 F     Minnie     1746 0.0179     5</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6  1880 F     Margaret   1578 0.0162     6</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7  1880 F     Ida        1472 0.0151     7</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8  1880 F     Alice      1414 0.0145     8</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9  1880 F     Bertha     1320 0.0135     9</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  1880 F     Sarah      1288 0.0132    10</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 1,924,655 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The design of dplyr was centred around verbs like <code>filter()</code>, <code>mutate()</code>, and <code>summarise()</code>, with names that evoked their desired purpose. Each verb did one thing well, and was designed to compose with other verbs in order to solve complex problems. While dplyr does require some big new ideas, I found that students learned them much more easily than functional programming.</p>
<p>The early years of dplyr benefited tremendously from the work of Romain François (initially as an RStudio contractor and then later as an employee). Thanks to his C++ expertise, dplyr also ended up being much faster than plyr, ensuring that there was an immediate payoff to learning it<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>. One of the particularly nice features of dplyr is that you can use the same syntax with different backends. For example, you can use dbplyr<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> (2017) to work with SQL databases where, instead of running R code, the package generates SQL code that is run in the database.</p>
<!-- My work on dplyr also led to the development of the purrr package (2015). It's hard for me to describe exactly what purrr is, except that it provides a bunch of useful and consistent tools for functional programming. purrr was an update to plyr. plyr supported four main data structures: lists, data frames, and arrays. recognising that the data frame side of plyr was handled by dplyr, and arrays to not be that useful, extract out the list handling code into purrr. -->
<p>During this time I also started thinking about how data gets into R, starting with databases. I took over maintenance of the DBI and RSQLite packages from Seth Falcon (2013), created bigrquery (2015) to work with Google’s BigQuery database, and forked RPostgres from the then-unmaintained RPostgresSQL (2015). This work was done in concert with Kirill Müller, who now maintains much of the database ecosystem thanks to funding from the R Consortium. After databases, I worked on a range of other data sources including web scraping (rvest, 2014), Excel (readxl, 2015), rectangular text files (readr, 2015), SPSS/SAS/Stata (haven, 2015), and XML (xml2, 2015). None of these packages would have been possible without my newfound C++ skills, as they all relied on tight integration with existing C libraries.</p>
<p>Around this time I started to become particularly well known in the R community. This led to a couple of popular virtual Q&amp;A sessions on <a href="https://www.reddit.com/r/dataisbeautiful/comments/3mp9r7/im_hadley_wickham_chief_scientist_at_rstudio_and/">Reddit</a> (2015) and <a href="https://quorasessionwithhadleywickham.quora.com">Quora</a> (2016), which are good places to look if you’re interested in getting a snapshot of my thinking at the time.</p>
</section>
</section>
<section id="the-early-days" class="level2">
<h2 class="anchored" data-anchor-id="the-early-days">The early days</h2>
<p>While most of the packages of the tidyverse-to-be existed in 2015, the tidyverse had yet to be named and defined. In the this section you’ll learn how the name came to be, the common principles that underlie tidyverse packages, and how I helped people learn to use it.</p>
<section id="naming-the-tidyverse" class="level3">
<h3 class="anchored" data-anchor-id="naming-the-tidyverse">Naming the tidyverse</h3>
<p>As the collection of packages I had developed grew, the community needed some name to refer to them in aggregate. Many people started calling these packages the “Hadleyverse”<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>, a name that I found tremendously unappealing. Thus I started brainstorming an “official” name that I liked, with candidates including the sleekverse, the dapperverse, and the deftverse<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>. In hindsight, the tidyverse seems obvious, and I wonder why I had to spend so much time and effort coming up with a name.</p>
<p>Overall, I’m still very happy with the name, but there’s one feature that I don’t like: it implies that everything outside the tidyverse is the messyverse. I don’t believe this is true: the tidyverse is just one way to get the job done and I don’t think it’s wrong to use other tools (indeed, it’s usually not possible to do an analyis using only the tidyverse).</p>
<p>I announced the name at my keynote at useR on June 29, 2016. And then a few months later in September, I released the <a href="https://posit.co/blog/tidyverse-1-0-0/">tidyverse package</a>. This package had two main goals:</p>
<ul>
<li><p>To make it easy to install all packages in the tidyverse with a single line of code, <code>install.packages("tidyverse")</code>. This made it easy to get a “batteries included” data science environment and was especially useful when teaching.</p></li>
<li><p>To make it easy to load the most common packages, so that you could type <code>library(tidyverse)</code> instead of loading packages one by one. The initial release loaded ggplot2, dplyr, tidyr, readr, purrr, and tibble, then version 1.2.0 (September 2017) added forcats and stringr, and version 2.0.0 (March 2023) added lubridate<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a>.</p></li>
</ul>
<p><a href="#fig-the-tidyverse" class="quarto-xref">Figure&nbsp;2</a> summarises the current state of the tidyverse, broken down by our model of the data science process.</p>
<div id="fig-the-tidyverse" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A night sky themed diagram showing the data science workflow in R, with main steps connected by arrows: &quot;Import&quot; (featuring packages like readr, readxl, haven, xml2) connects to &quot;Tidy&quot; (tidyr), which connects to &quot;Transform&quot; (featuring dplyr, forcats, hms, lubridate, stringr). The workflow continues to &quot;Visualise&quot; (ggplot2) and &quot;Model&quot; (tidymodels). The background is dotted with colorful hexagonal shapes. On the right side are two images: a tidyverse.org website screenshot and an &quot;R for Data Science&quot; book cover. Additional programming packages purrr and magrittr are listed at the bottom.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-the-tidyverse-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="the-tidyverse.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Figure&nbsp;2: The packages of the tidyverse, organised using a partial version of my model of the data science workflow. The missing step is communication, which is aided by tools outside the tidyverse, like Quarto and Shiny. This image comes from a presentation called the “Joy of Data Science” which I gave in 2020."><img src="the-tidyverse.png" class="img-fluid figure-img" alt="A night sky themed diagram showing the data science workflow in R, with main steps connected by arrows: &quot;Import&quot; (featuring packages like readr, readxl, haven, xml2) connects to &quot;Tidy&quot; (tidyr), which connects to &quot;Transform&quot; (featuring dplyr, forcats, hms, lubridate, stringr). The workflow continues to &quot;Visualise&quot; (ggplot2) and &quot;Model&quot; (tidymodels). The background is dotted with colorful hexagonal shapes. On the right side are two images: a tidyverse.org website screenshot and an &quot;R for Data Science&quot; book cover. Additional programming packages purrr and magrittr are listed at the bottom."></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-the-tidyverse-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: The packages of the tidyverse, organised using a partial version of my model of the data science workflow. The missing step is communication, which is aided by tools outside the tidyverse, like Quarto and Shiny. This image comes from a presentation called the “Joy of Data Science” which I gave in 2020.
</figcaption>
</figure>
</div>
</section>
<section id="defining-the-tidyverse" class="level3">
<h3 class="anchored" data-anchor-id="defining-the-tidyverse">Defining the tidyverse</h3>
<p>Naming the tidyverse created some bigger questions: What exactly is the tidyverse? What are the unifying principles that underlie the packages in the tidyverse? In my useR talk I cited three unifying principles:</p>
<ul>
<li>Uniform data structures.</li>
<li>Uniform APIs.</li>
<li>Support referential transparency.</li>
</ul>
<p>I think the first two principles are straightforward: it’s easier to learn a new tool if it uses data structures and interfaces that you’re already familiar with. But what does it mean to support referential transparency? That’s a call to the principles of tidy evaluation, which we’ll come back to in <a href="#sec-tidy-eval" class="quarto-xref">Section&nbsp;4.4</a>.</p>
<p>I repeated my introduction to the tidyverse talk a few times that year and by December 2016 I’d further refined the core principles to these four:</p>
<ul>
<li>Share data structures (i.e.&nbsp;tidy tibbles).</li>
<li>Compose simple pieces (i.e.&nbsp;use the pipe).</li>
<li>Embrace functional programming (instead of for loops).</li>
<li>Write for humans.</li>
</ul>
<p>The final bullet was particularly motivated by this quote:</p>
<blockquote class="blockquote">
<p>Programs must be written for people to read, and only incidentally for machines to execute.<br>
— Hal Abelson</p>
</blockquote>
<p>I think that’s a particularly important principle for data science code, because it’s very important to be able to read, understand, and the critique the code used to perform an analysis. Ideally, you’re not just solving a problem with code, you’re also documenting how you solved it so that you (and others) can understand the path that you’ve taken.</p>
<p>Since that time I’ve continued the definition of the tidyverse and you can see my latest iteration in <a href="https://design.tidyverse.org/unifying.html">Tidy design principles</a>. At the time of writing, the four principles of the tidyverse were:</p>
<ul>
<li><p>It is <strong>human centred</strong>, i.e.&nbsp;the tidyverse is designed specifically to support the activities of a human data analyst.</p></li>
<li><p>It is <strong>consistent</strong>, so that what you learn about one function or package can be applied to another, and the number of special cases that you need to remember is as small as possible.</p></li>
<li><p>It is <strong>composable</strong>, allowing you to solve complex problems by breaking them down into small pieces, supporting a rapid cycle of exploratory iteration to find the best solution.</p></li>
<li><p>It is <strong>inclusive</strong>, because the tidyverse is not just the collection of packages, but it is also the community of people who use them.</p></li>
</ul>
</section>
<section id="learning" class="level3">
<h3 class="anchored" data-anchor-id="learning">Learning</h3>
<p>Once I had identified the tidyverse, it become natural to ask “how do you learn it?” The answer to this question became the book <a href="https://r4ds.hadley.nz">R for Data Science</a> <span class="citation" data-cites="r4ds-1 r4ds-2">(<a href="#ref-r4ds-1" role="doc-biblioref">Wickham and Grolemund 2017</a>; <a href="#ref-r4ds-2" role="doc-biblioref">Wickham, Çetinkaya-Rundel, and Grolemund 2023</a>)</span>. I wrote a book because I believe that books are one of the best ways to spread big ideas; the linear format allows you to lead the reader step-by-step and you have plenty of space to go in to the details. Equally important to me was that the book should be available to all, regardless of their ability to pay. That’s why all the books I write have a dual production model: a free HTML version that I produce and a paid physical version produced by a commercial publisher.</p>
<p>R for Data Science proved to be extremely popular. It sold very well, but more importantly to me, a ton of people used the website<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a>. One of my favourite things about the book is how many languages it has been translated into including Russian, Polish, Japanese, Chinese (traditional) and Chinese (simplified). I’m particularly fond of the community translations (<a href="http://es.r4ds.hadley.nz/">Spanish</a>, <a href="https://it.r4ds.hadley.nz/">Portugese</a>, <a href="https://tr.r4ds.hadley.nz/">Turkish</a>, and <a href="https://pt.r4ds.hadley.nz/">Italian</a>) because they were translated by volunteers and made freely available to the world.</p>
</section>
</section>
<section id="key-innovations" class="level2">
<h2 class="anchored" data-anchor-id="key-innovations">Key innovations</h2>
<p>So far I’ve traced the chronological development of the tidyverse, but I also want to examine some of the specific innovations that emerged during this journey. These innovations weren’t just programming achievements: they represent new ways of thinking about and interacting with data, and helped to build a community around the tidyverse. I’ve selected five contributions—tidy data, tibbles, the pipe, tidy evaluation, and hex stickers—that I’m particularly proud of. Let’s examine each of these key developments in turn.</p>
<section id="tidy-data" class="level3">
<h3 class="anchored" data-anchor-id="tidy-data">Tidy data</h3>
<p>I’ve always had a very strong sense that there’s a “right” way to organise your data, a way that would make the rest of your analysis much easier. And when looking at a dataset I could usually identify what form would be the most productive. But I had a time explaining what I was doing to others, and experienced numerous failures when trying to teach my approach to students. Eventually I figured out the three principles of tidy data<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a> and elucidated them in <span class="citation" data-cites="tidy-data">Wickham (<a href="#ref-tidy-data" role="doc-biblioref">2014</a>)</span>:</p>
<ul>
<li>Each variable goes in a column.</li>
<li>Each observation goes in a row.</li>
<li>Each value goes in a cell.</li>
</ul>
<p>This definition seems to work for people from diverse academic backgrounds, even without a precise definition of variable and observation. Given their simplicity, it seems hard to understand why it took me so long to figure them out. It’s also a strange gap in the statistics literature: this is one of the very few papers that actually describe how you should structure your data in order to do statistics.</p>
<!--# TODO: When I learned visualisation with base R, I struggled with the variety of data structures that different plotting functions could use. For example, `plot()` can either take vectors of data (e.g. `plot(x, y)`) or a formula and a data frame (e.g. `plot(y ~ x, data = df)`). But if you want to plot multiple series at once you need to use `matplot()`, `matpoints()`, or `matlines()`, all of which take a matrix. -->
<p>The definition of tidy data was tightly paired with <a href="https://tidyr.tidyverse.org">tidyr</a><a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a>, a package that helps tidy your data. This package initially provided the <code>gather()</code> and <code>spread()</code> functions, but many people (including me!) had a hard time remembering which was which and how their arguments worked. Additionally, their design wasn’t quite flexible enough to handle all the problems which we later discovered in practice. In <a href="https://www.tidyverse.org/blog/2019/09/tidyr-1-0-0/">tidyr 1.0.0</a> (2019), we resolved many of these problems by introducing the new<code>pivot_longer()</code> and <code>pivot_wider()</code> functions. These new names were informed by (casual) user research, where I asked my twitter followers to describe two data transformation operations. You can learn more about this research at <a href="https://github.com/hadley/table-shapes" class="uri">https://github.com/hadley/table-shapes</a>.</p>
<p>tidyr 1.0.0 also expanded the scope of the package to encompass “rectangling”, a new term for converting hierarchical data into tidy rectangles. At the time, this was becoming increasingly important as more data was coming from JSON web APIs, which tended to produce deeply nested data structures. You can learn more about the problem and the solutions that tidyr provides in <a href="https://tidyr.tidyverse.org/articles/rectangle.html">tidyr’s rectangling vignette</a>.</p>
<!--
This work also stimulated my thinking around the more complex data structures that nested data frames inside of other data frames. \@fig-nest-pack-chop illustrates my thinking at the time, connecting three different ways of representing the same data. My enthusiasm for these data structures has waxed and waned over the years, but they're certainly theoretical structures and I really appreciate the beauty of an approach that unifies the ways of working with them.

::: {#fig-nest-pack-chop}
![](nest-pack-chop.png)

Three ways of representing the same data. On the right, we have a flat data frame. On the right, a nested data frame, where the data column is a list of data frames. On the bottom, we have a packed data frame, where the data column is itself a data frame.
:::
-->
</section>
<section id="tibbles" class="level3">
<h3 class="anchored" data-anchor-id="tibbles">tibbles</h3>
<p>Tidy data provides a theoretical framework to productively organise your data. But you also need a practical data structure where this data can live. Base R provides the data frame, but I found that it suffered from a number of small issues that added needless friction. To resolve these issues, I created the tibble, an extension of the data frame with a number of small changes:</p>
<ul>
<li><p>Data frames can flood your console with output when working with datasets containing many rows or many columns. In older versions of R, you couldn’t even cancel this display, making it easy to lock yourself out of your console when working with bigger datasets. tibbles print only a small number of rows and just the columns that fit on one screen. You can always explicitly request more data, but the defaults keep your analysis workflow nimble.</p></li>
<li><p>When teaching, I found that students didn’t have a good sense for column types, and even I sometimes found myself confused about whether a column was a date, a string, or factor. To avoid this problem, tibbles show (abbreviated) variable types underneath the column names.</p></li>
<li><p>In the unfortunate case of <code>data.frame(x = c(NA, "&lt;NA&gt;"))</code>, there’s no way to distinguish the two values from the printed output. Tibbles use a side-channel, colour, to ensure that there’s no way to confuse a missing value and a string with the same printed representation.</p></li>
<li><p>Base data frames technically support nested data structures, like columns that are themselves data frames or columns that are lists of data frames. But they are printed poorly, making them hard to use. Tibbles strive to represent these more complex data types in a readable way, making them more usable where needed.</p></li>
</ul>
<p>tibbles also resolve a couple of subsetting gotchas that make it easy to make silent errors when writing package code. For example, if <code>df</code> is a data.frame, then:</p>
<ul>
<li><p><code>df[, cols]</code> can return either a vector or a data frame, depending on the contents of <code>col</code>.</p></li>
<li><p><code>df$x</code> uses partial matching, so that if column <code>x</code>doesn’t exist but column <code>xyz</code> does, it will silently return <code>df$xyz</code>.</p></li>
</ul>
<p>If <code>df</code> is a tibble then neither of these problems occur because <code>df[]</code> always returns another tibble and <code>df$x</code> never performs partial matching. This is why I have jokingly described tibbles as lazy and surly versions of data frames.</p>
<p>tibbles started life in dplyr, originally called <code>tbl_df</code>s with no suggestion as how to pronounce their name. <a href="https://x.com/kevin_ushey/status/514659005621219329">Kevin Ushey</a> proposed pronouncing them as tibble-diffs in 2014, and the tibble bit stuck. As the utility and complexity of tibbles expanded, they needed more space to grow and were <a href="https://posit.co/blog/tibble-1-0-0/">extracted into their own package</a> in 2016.</p>
<p>tibbles were a much more contentious data structure than I had anticipated. They broke code in older packages and my strong opinions about the formatting of significant digits caused some community consternation. The contention seems to have mostly died down, but today I am much more cautious about introducing new data structures. New data structures are fundamentally much more costly than new functions or packages, and they need to be kept to the bare minimum.</p>
</section>
<section id="the-pipe" class="level3">
<h3 class="anchored" data-anchor-id="the-pipe">The pipe</h3>
<blockquote class="blockquote">
<p>No matter how complex and polished the individual operations are, it is often the quality of the glue that most directly determines the power of the system.</p>
<p>— Hal Abelson</p>
</blockquote>
<p>The pipe quickly became one of the defining features of tidyverse code. It allows you to rewrite function composition (e.g.&nbsp;<code>f(g(x)))</code>) as a linear sequence of transformations (e.g.&nbsp;<code>x |&gt; f() |&gt; g()</code>), which tends to make common data analysis programming patterns much easier to read.</p>
<p>I first implemented the pipe in dplyr in Oct 2013 and called it <code>%.%</code>. When <a href="https://rstudioblog.wordpress.com/2014/01/17/introducing-dplyr/">I announced dplyr</a> in January 2014, I learned that Stefan Milton Bache had been thinking along similar lines and had created the magrittr package. It used <code>%&gt;%</code> instead of <code>%.%</code>, which is easier to type (since you can hold down the shift button the whole time<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a>), and had more comprehensive features. So I quickly pivoted to use magrittr and deprecated <code>%.%</code>. I was initially cautious about this new syntax, but users picked up on it quickly, and I found it easy to teach. You can learn more about the early history of the pipe in Adolfo Álvarez’s excellent blog post “<a href="http://adolfoalvarez.cl/blog/2021-09-16-plumbers-chains-and-famous-painters-the-history-of-the-pipe-operator-in-r/">Plumbers, chains, and famous painters: The (updated) history of the pipe operator in R</a>”.</p>
<p>Today, the pipe is available in base R thanks to a collaborative effort. In 2016, Lionel Henry <a href="https://lionelhenry.github.io/2016/02/15/ideas-for-an-updated-r-syntax/index.html">proposed new syntax</a> and wrote a patch for R, which Jim Hester presented to the R Core Team at the Directions in Statistical Computing Conference in 2017. This presentation was received positively, but it took some time for R Core to fully align on the utility of the pipe. Three years later, Luke Tierney added the base pipe to R 4.1 (2020), following up with placeholder syntax in R 4.2, and support for <code>$</code>, <code>[</code> and <code>[[</code> in R 4.3. Because R can modify the parser, the base pipe has better syntax, <code>|&gt;</code>, including a more visible placeholder, <code>_</code>. With the maturity of the base pipe, the tidyverse is gradually moving away from <code>%&gt;%</code> towards <code>|&gt;</code>, a process that will take several years to complete.</p>
<p>As an interesting historical anecdote, there would have been no need for ggplot2 had I discovered the pipe earlier, as ggplot was based on function composition. I correctly identified that function composition was an unappealing user interface, but if I had discovered the pipe at that time, ggplot could have used it, rather than needing to switch to <code>+</code> in ggplot2. You can <a href="https://github.com/hadley/ggplot1">try out ggplot</a> if you want, or <a href="https://forum.posit.co/t/why-cant-ggplot2-use/4372/7%3E">learn why ggplot2 can’t switch to the pipe</a>.</p>
</section>
<section id="sec-tidy-eval" class="level3">
<h3 class="anchored" data-anchor-id="sec-tidy-eval">Tidy evaluation</h3>
<p>One of the most challenging features of the tidyverse is tidy evaluation. It’s hard to briefly define tidy evaluation, but fortunately it’s straightforward to motivate with an example. Imagine you’ve written the following repeated code, and following the “rule of three”, you want to extract out the repetition into a function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(g1) <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(a))</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="sc">|&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(g2) <span class="sc">|&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(b))</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>df3 <span class="sc">|&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(g3) <span class="sc">|&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(c))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You might try the usual approach to writing a function and come up with the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>grouped_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(df, group_var, summary_var) {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(group_var) <span class="sc">|&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(summary_var))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">|&gt;</span> <span class="fu">grouped_mean</span>(g1, a)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in `group_by()`:</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! Must group by variables found in `.data`.</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✖ Column `group_var` is not found.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This code doesn’t work because dplyr looks for a variable literally named <code>group_var</code>, not the variable, <code>a</code>, that you want. I think we now know how to succinctly define the problem: we use the word variable to mean two different things. A <strong>data-variable</strong> is a statistical variable, something that exists inside a data frame, like <code>g1</code>, or <code>a</code>. An <strong>environment-variable</strong> is a computer science variable, something that exists in (e.g.) the global environment, like <code>df1</code> or <code>df2</code>. The fundamental challenge of tidy evaluation is handling the case where you have a data-variable (e.g.&nbsp;<code>g1</code>) stored inside of a environment-variable (e.g.&nbsp;<code>group_var</code>).</p>
<p>It took us around five years to provide the tools to fully solve the problem. My efforts started in dplyr 0.3.0 (2014) with the introduction of the <a href="https://cran.r-project.org/web/packages/lazyeval">lazyeval</a> package. There were three pieces:</p>
<ul>
<li><code>lazyeval::lazy()</code> allowed you to capture the data-variable stored inside an environment-variable, producing an explicit lazy object.</li>
<li><code>lazyeval::interp()</code> allowed you to interpolate a lazy object into a bigger expression creating a new lazy object.</li>
<li>Every dplyr function had a variant that ended in an underscore that took lazy objects.</li>
</ul>
<p>That led to a solution that looks like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>grouped_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(df, group_var, summary_var) {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  group_var <span class="ot">&lt;-</span> lazyeval<span class="sc">::</span><span class="fu">lazy</span>(group_var)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  summary_var <span class="ot">&lt;-</span> lazyeval<span class="sc">::</span><span class="fu">lazy</span>(summary_var)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by_</span>(group_var) <span class="sc">|&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise_</span>(<span class="at">mean =</span> lazyeval<span class="sc">::</span><span class="fu">interp</span>(<span class="sc">~</span> <span class="fu">mean</span>(summary_var), summary_var))</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This approach worked, but was a bit clunky. Additionally, in July 2016, I learned that the technique that allowed <code>lazy()</code> to work would be no longer supported in a future version of R, which lead me back to the drawing board. Fortunately Lionel Henry had recently joined my team and had a bunch of ideas of how to improve the situation. That lead us to a new framework called tidy evaluation (tidyeval for short) which we introduced to dplyr 0.6.0 (2017).</p>
<p>Tidy evaluation is provided by the <a href="https://rlang.r-lib.org/">rlang</a> package, and introduces two new tools:</p>
<ul>
<li><p><code>enquo()</code> lets you to “quote” an environment-variable creating an explicit quosure object.</p></li>
<li><p><code>!!</code> (pronounced bang-bang), allowed you to “unquote” or interpolate a quosure into a bigger expression.</p></li>
</ul>
<p>This approach was appealing because every dplyr function could itself call <code>enquo()</code>, meaning that we no longer needed to have two versions of every function. This led to the following solution:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>grouped_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(df, group_var, summary_var) {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(<span class="sc">!!</span><span class="fu">enquo</span>(group_var)) <span class="sc">|&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(<span class="sc">!!</span><span class="fu">enquo</span>(summary_var)))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Tidy evaluation included a solid theoretical foundation, making us more confident that our implementation was correct and complete. I still believe that theory is really important but experience taught us that few R users wanted to learn it. During 2017 and 2018 I gave 12 talks on tidyeval around the world, trying to convince others that they could use tidyeval for their own code. But this was much less effective than I had hoped and there were general rumblings in the community that tidyeval was too hard<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a>.</p>
<p>This again sent us back to the drawing board and we came up with a new approach called embracing <a href="https://www.tidyverse.org/blog/2019/06/rlang-0-4-0">in mid 2019</a>. This style introduced just one new operator <code>{ }</code>, which you use whenever you have an data-variable referenced by an environment-variable. While <code>enquo()</code> and <code>!!</code> continue to be used behind the scenes, there’s now only one bit of new syntax to learn. This leads to a simple implementation of <code>grouped_mean()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>grouped_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(df, group_var, summary_var) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>({{ group_var }}) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>({{ summary_var }}))</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We had also missed a few of common problems that were surprisingly hard to solve with existing tools, which required a few smaller enhancements and some better documentation. Now we have a <a href="https://dplyr.tidyverse.org/articles/programming.html">cookbook</a> that doesn’t require any theoretical knowledge and the grumblings about tidyeval seem to have subsided.</p>
</section>
<section id="hex-logos" class="level3">
<h3 class="anchored" data-anchor-id="hex-logos">Hex logos</h3>
<p>You can’t talk about the history of the tidyverse without also talking about hex logos. While the early history of hex logos is now murky, from what I can tell, it appears that Stefan Milton Bache and I co-discovered hex stickers around the same time in 2014<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a> through <a href="https://hexb.in" class="uri">https://hexb.in</a>. I personally found it very appealing to have a shape that can tile the back of a laptop, along with a spec that ensures everyone’s stickers are the same size and the same orientation (point down!).</p>
<p>I’m pretty sure the first hex logo was magrittr’s<a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a>, designed by Stefan in December 2014. Soon afterwards I fully I embraced the idea of hex stickers and started creating them for key packages with the help of designer Greg Swinehart; you can see two early versions of the ggplot2 logo in <a href="#fig-early-logos" class="quarto-xref">Figure&nbsp;3</a>. By mid-2016 we were ordering them en masse for RStudio events, and we were beginning to see logos for other packages in the community.</p>
<div id="fig-early-logos" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Two hexagonal logos for ggplot2, a data visualization package. Each hexagon contains a line graph with black dots connected by lines and bar chart elements. The first version uses multiple bright colors (turquoise, coral, green, and pink) for the bars, while the second version uses different shades of blue. Both logos have a light gray gridline background and the text 'ggplot2' at the top, with the first using bold typography and the second using a lighter weight code font.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-early-logos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="ggplot2-logos.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Figure&nbsp;3: Two early versions of the ggplot2 hex logo. I can’t find any record of who created the first version (left), but I presume it was me given the incorrect orientation of the hex. The second version (right) was created in concert with Garrett Grolemund."><img src="ggplot2-logos.png" class="img-fluid figure-img" alt="Two hexagonal logos for ggplot2, a data visualization package. Each hexagon contains a line graph with black dots connected by lines and bar chart elements. The first version uses multiple bright colors (turquoise, coral, green, and pink) for the bars, while the second version uses different shades of blue. Both logos have a light gray gridline background and the text 'ggplot2' at the top, with the first using bold typography and the second using a lighter weight code font."></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-early-logos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Two early versions of the ggplot2 hex logo. I can’t find any record of who created the first version (left), but I presume it was me given the incorrect orientation of the hex. The second version (right) was created in concert with Garrett Grolemund.
</figcaption>
</figure>
</div>
<p>Today, a huge number of packages have a logo, and I love seeing the creativity and diversity package authors bring to their design! I love hex stickers as a community building tool: people can see your laptop, immediately recognise you as a member of the R community, and get a sense of what you use R for. I’ve heard many stories of people striking up a conversation with strangers just because they recognised the stickers. They also play a role akin to trading cards and <a href="#fig-hex-office" class="quarto-xref">Figure&nbsp;4</a> shows a collection of stickers that I’ve been given over the years.</p>
<div id="fig-hex-office" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A collection of hexagonal stickers arranged in a honeycomb pattern, featuring logos and icons related to R programming, data science, and statistical computing. The stickers use different colors and designs, creating a visually diverse mosaic. Some notable stickers include the RStudio hex logo, a kakapo bird, and various data visualization tools.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hex-office-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="hex-office.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Figure&nbsp;4: A board of hex stickers on display in my office."><img src="hex-office.jpg" class="img-fluid figure-img" alt="A collection of hexagonal stickers arranged in a honeycomb pattern, featuring logos and icons related to R programming, data science, and statistical computing. The stickers use different colors and designs, creating a visually diverse mosaic. Some notable stickers include the RStudio hex logo, a kakapo bird, and various data visualization tools."></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hex-office-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: A board of hex stickers on display in my office.
</figcaption>
</figure>
</div>
<!--
 @fig-hex-wall shows the Posit conf's hex wall, which is a popular place to take selfies.

::: {#fig-hex-wall}
![](hex-wall.png)

posit::conf() (and rstudio::conf() before) features a hex wall that's a popular place to take photos.
:::
-->
</section>
</section>
<section id="the-tidyverse-at-posit" class="level2">
<h2 class="anchored" data-anchor-id="the-tidyverse-at-posit">The tidyverse at Posit</h2>
<p>The naming of the tidyverse coincided with the start of my team at RStudio (now Posit), and the overarching journey from a project that was primarily developed by me to one with many full-time contributors. This wouldn’t have been possible without Posit, which has funded this work as part of its public benefit corporation mission. I feel tremendously lucky to work at an organisation who’s mission so closely aligns with my own.</p>
<p>The tidyverse team currently includes Lionel Henry, Jenny Bryan, Gábor Csárdi, Mine Çetinkaya-Rundel, Thomas Lin Pedersen, Davis Vaughan, George Stagg, and Teun Van den Brand, as well as the tidymodels team, described below. Jim Hester, Mara Averick, Romain Francois, Tracy Teal, and Andy Teucher have moved on from their full-time roles at Posit but many of remain active in the community and they’re all still valued members of the broader “team tidyverse”.</p>
<!--
Posit has also supported temporary employees and part-time contractors. We've had four ggplot2 summer interns: Thomas Lin Pedersen (2016), Kara Woo (2017), Dana Paige Seidel (2018), and Dewey Dunnington (2019). And there have been other paid contributors such as Kirill Muller, Oliver Gjoneski, Jeroen Ooms, and Charlie Gao.

-   Lionel Henry (2016-)
-   Jenny Bryan (2017-)
-   Gabor Csardi (2017-)
-   Thomas Lin Pedersen (2018-)
-   Davis Vaughan (2018-)
-   George Stagg (2022-)

-   Jim Hester (2016-2021)
-   Mara Averick (2017-2023)
-   Romain Francois (2018-2023)
-   Tracy Teal (2021-2023)
-   Andy Teucher (2023)
-->
<p>The mission of the team is broad and extends well beyond the tidyverse: we want to make R the best environment for doing data science. We have nothing against other programming languages (and certainly use them where appropriate), but we love R, believe in it, and believe that you have to stay focused if you want to have an impact.</p>
<p>To achieve this mission the most obvious skills we deploy are our programming skills: we write a lot of R code (as well as a smattering of C, C++, Rust, and Javascript) to create packages. Our mission extends beyond just tidyverse packages because we recognise that few analyses can be completed with the tidyverse alone, and most will require additional special purpose tools. For this reason, we strive to help every R package developer make higher quality packages. You can see this work in books like <a href="https://adv-r.hadley.nz">Advanced R</a> and <a href="https://r-pkgs.org">R Packages</a> and in the devtools family of packages that support tasks related to package development. This family of packages has had a big impact on the practice of package development: at the time of writing, ~9,000 packages use testthat for unit testing, ~12,000 packages use pkgdown to make package websites, and ~16,000 packages use roxygen2 to generate documentation.</p>
<p>But it doesn’t matter how useful your code is if no one knows about it. So we believe that marketing and education are as important as programming, and all team members are expected to contribute to our outreach by <a href="https://www.tidyverse.org/blog">writing blog posts</a>, writing books, giving talks, teaching workshops, and generally helping to build and support the R community. We’re also a generally process-oriented team and we do our best to write up our processes so that others can benefit from them. This work includes:</p>
<ul>
<li><p>Our package release checklist (created by <code>usethis::use_release_isse()</code>) ensures that we maximise the chances of successful CRAN submission by following a standard process. Our process grows as we discover new problems, and shrinks as we figure out how to automate manual steps away.</p></li>
<li><p>We strive to keep our code formatting as consistent as possible so we wrote up our choices in the <a href="https://style.tidyverse.org">tidyverse style guide</a>. This is probably the most commonly used style guide in the R community.</p></li>
<li><p>We spend a lot of time reviewing code (both internally and externally) so we wrote up <a href="https://code-review.tidyverse.org">code review guidelines</a> to keep our own work consistent, and to help new contributors know what to expect. This work was lead by Davis Vaughan.</p></li>
<li><p>We are slowly working on an exposition of the <a href="https://design.tidyverse.org">design principles</a> that guide the design of tidyverse APIs. This is helpful for us, because it makes it easier to remember design decisions and re-apply them the same way in multiple places, and also helps the community see reusable patterns that they can apply to their own code.</p></li>
</ul>
<p>Our broad mission means that recently we have been spending less time on tidyverse packages and more time on broader data science efforts; I’ll come back to our current areas of focus at the end of this paper.</p>
<section id="tidymodels" class="level3">
<h3 class="anchored" data-anchor-id="tidymodels">tidymodels</h3>
<p>Within the tidyverse team, the tidymodels team has a narrower mission: improving the tools data scientists need to do statistical modelling and machine learning. The tidymodels team started in late 2016 when Max Kuhn joined RStudio, after initial talks about how we could support statistical and ML modelling. As well as Max, the tidymodels team currently consists of Hannah Frick, Simon Couch, and Emil Hvitfeldt.</p>
<p>Max was the obvious choice to found this team because of his work on the caret package. caret provided functionality for basic predictive modelling tasks such as performance measures and resampling as well as a consistent user interface across many modelling packages. Based on this work, Max wanted to create a more extensible framework that would integrate more advanced tools, such as more complex pre- and post-processing, and censored regression models. The resulting collection of packages was called tidymodels and heavily relied on the tidyverse syntax and the underlying tools described above.</p>
<p>A defining feature of tidymodels is its lighthearted approach to naming and the fun it has with package logos. For example, for a package similar in spirit to caret, Max’s initial idea was to give it the code name “carrot” to confuse outside users. I proposed “parsnip”, and the name stuck.</p>
</section>
</section>
<section id="tidyverse-community" class="level2">
<h2 class="anchored" data-anchor-id="tidyverse-community">Tidyverse community</h2>
<p>The tidyverse transcends its technical foundations to represent something far greater: a vibrant, global community of practitioners, educators, and users who have embraced these tools to solve real-world problems. While the core team at Posit provides stewardship and a core of software development expertise, the true strength of the tidyverse flows from its diverse community of users and contributors.</p>
<p>What makes the tidyverse community special is not just its size or reach, but its culture of mutual support and shared learning. Whether someone is taking their first steps with R or pushing the boundaries of what’s possible with these tools, they’ll find a community ready to help them succeed. This collaborative spirit has created a virtuous cycle where learning flows in all directions: new users bring fresh perspectives and questions that challenge assumptions, while experienced practitioners share deep insights that push the ecosystem forward.</p>
<p>For us working on the tidyverse, the community serves as both motivation and guide. Your successes energise us, your challenges direct our efforts, and your creativity constantly expands our vision of what’s possible. This section explores the various dimensions of this community – from its evolution across different social platforms to the crucial role of community contributors in shaping and improving the tidyverse itself.</p>
<section id="social-media-and-community-spaces" class="level3">
<h3 class="anchored" data-anchor-id="social-media-and-community-spaces">Social media and community spaces</h3>
<p>The early R community centred around traditional mailing lists, particularly r-help and r-devel. While these lists were invaluable for early R users, they reflected the academic statistical computing culture of the time – technically rigorous, but often unwelcoming to newcomers<a href="#fn20" class="footnote-ref" id="fnref20" role="doc-noteref"><sup>20</sup></a>. This environment prompted the creation of alternative spaces, including the ggplot2 mailing list in 2008, which explicitly aimed to provide a more supportive environment for users learning data visualisation.</p>
<p>But the real transformation began with the community’s migration to more modern platforms. Stack Overflow emerged as a crucial resource for asking and answering coding questions, and, despite some toxicity amongst the self-appointed moderators, was generally a welcoming environment. Twitter was particularly transformative in 2010-2022. The #rstats hashtag created a space where users could share quick tips, celebrate successes, and build personal connections. The R community on Twitter became known for its supportive and welcoming atmosphere, standing in marked contrast to the less friendly environs found in other technical communities. I believe a big part of this is due the diversity of R users, which has been tremendously boosted thanks to groups like <a href="https://rladies.org">R-Ladies</a>, <a href="https://mircommunity.com">Minorities in R</a>, and <a href="https://rainbowr.org">rainbowR</a>.</p>
<p>Today, the R community has mostly shifted to new platforms like Mastodon, LinkedIn, and Bluesky. I find Bluesky particularly rewarding; while the platform is still evolving, it has already become a vibrant hub for maintaining the connections that make the R community special.</p>
</section>
<section id="community-contributors" class="level3">
<h3 class="anchored" data-anchor-id="community-contributors">Community contributors</h3>
<p>The tidyverse wouldn’t be a fraction as good as it is today without community contributions. To foster this collaborative spirit, we actively encourage and celebrate contributions of all sizes, from minor bug fixes to major feature enhancements. A key tool in supporting our community of developers are the Tidyverse Developer Days, which we launched in <a href="https://www.tidyverse.org/blog/2019/04/tidyverse-dev-day-at-user-2019/">2019</a>. These hands-on events provide a welcoming environment where participants learn the ins and outs of contributing to the tidyverse while tackling real issues with a ton of hands on support. While the COVID-19 pandemic paused these gatherings after <a href="https://www.tidyverse.org/blog/2020/02/tidy-dev-days-2020/">2020</a>, we’ve reinstated them in <a href="https://www.tidyverse.org/blog/2024/04/tdd-2024/">2024</a> and plan to make them an annual event following each posit::conf.</p>
<p>Most external contributors tend to provide a few small (but meaningful!) contributions. A limited number of external contributors end up contributing much time and effort over the course of many years. We recognise these contributors by making them package authors. This formally includes them in package metadata (so they are explicitly acknowledged on CRAN, on the package website, and in the package citation) and gives them write access to the GitHub repository. You can learn more about the rights and responsibilities of authors (and other roles) in our <a href="https://github.com/tidyverse/tidyups/blob/main/004-governance.md">tidyverse governance model</a>.</p>
<p>Many package authors are academics, and since the currency of academics is citations, in 2019 we made the effort to write <span class="citation" data-cites="tidyverse-welcome">Wickham et al. (<a href="#ref-tidyverse-welcome" role="doc-biblioref">2019</a>)</span>. This makes it easy to cite the tidyverse as a whole<a href="#fn21" class="footnote-ref" id="fnref21" role="doc-noteref"><sup>21</sup></a> and gives academic credit to tidyverse maintainers who might benefit from it. In alphabetical better, the authors are: Mara Averick, Jennifer Bryan, Winston Chang, Lucy McGowan, Romain François, Garrett Grolemund, Alex Hayes, Lionel Henry, Jim Hester, Max Kuhn, Thomas Pedersen, Evan Miller, Stephan Bache, Kirill Müller, Jeroen Ooms, David Robinson, Dana Seidel, Vitalie Spinu, Kohske Takahashi, Davis Vaughan, Claus Wilke, Kara Woo, and Hiroaki Yutani. This paper has been cited over 16,000 times at time of writing.</p>
<p>Since we’ve published that paper we’ve gained a few new maintainers such as Maximilian Girlich (tidyr, dbplyr), Mark Fairbanks (dtplyr), Ryan Dickerson (dtplyr), Olivier Roy (pkgdown), Danny Smith (haven), Maxim Shemanarev (ragg), and Teun van den Brand (ggplot2).</p>
</section>
</section>
<section id="maintaining-the-tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="maintaining-the-tidyverse">Maintaining the tidyverse</h2>
<p>For the last few years, the tidyverse has felt pretty mature to me. It’s certainly not perfect, but it feels like we have all of the main pieces in place, and much of the remaining work is grinding down the minor inconsistencies between them. Overall, the goal of the tidyverse is now consolidation and maintenance, not growth.</p>
<p>To support this goal, we worked on three major projects:</p>
<ul>
<li><p>In 2019, we created a policy for <a href="https://www.tidyverse.org/blog/2019/04/r-version-support/">R version support</a> (the current version, the development version, and the previous four versions). Coupled with R’s yearly release cycle, this means we support 5 years of R versions. This policy is important because many large enterprises use older versions of R, but still want to be able to use the latest and greatest package versions.</p></li>
<li><p>In 2020 and early 2021, we defined a <a href="https://www.tidyverse.org/blog/2021/02/lifecycle-1-0-0/">lifecycle policy</a>. The early days of the tidyverse were characterised by rapid evolution and backward incompatible change. This allowed us to rapidly evolve towards better user interfaces, but we the community found that the pace of change was too high. The lifecycle policy helps us clearly communicate the state of different functions and provides a clear commitment to backward compatibility.</p></li>
<li><p>In late 2021, we <a href="https://www.tidyverse.org/blog/2021/12/relicensing-packages/">re-licensed most tidyverse packages</a> to the MIT license. This increased consistency across packages, making it easier for legally conservative organisations to convince themselves there was little risk to using the tidyverse.</p></li>
</ul>
<p>There is one more maintainability change that I hope to make in the future: <strong>editions</strong>. The idea of an edition is that you can run code like <code>tidyverse::edition(2025)</code> to opt-in to our best practices as of (e.g.) 2025. Editions allows us to steer you towards the APIs that we think are best and make it possible to change sub-optimal behaviour without breaking existing code. For example, we could use editions to change the default colour schemes in ggplot2. We know that these could be improved, but we can’t change the defaults without breaking a lot of existing plots.</p>
</section>
<section id="whats-next" class="level2">
<h2 class="anchored" data-anchor-id="whats-next">What’s next?</h2>
<p>As the tidyverse becomes more mature, the places where the tidyverse team spends our innovation energy have started to change. Our mission is broad and we’re willing to go wherever this takes us, even if it’s into new areas that we know little about. Currently there are three new areas that we are exploring as a team:</p>
<ul>
<li><p><strong>Positron</strong>. <a href="https://github.com/posit-dev/positron">Positron</a> is a new IDE for data science, produced by the same team that created RStudio. The tidyverse team has been deeply involved in Positron’s tooling for R. This is exciting because it gives us new skills, allowing us to create coding interfaces where that makes the most sense, and to create graphical user interface where that is a better fit.</p></li>
<li><p><strong>R in production</strong>. If you’re working in industry, most analyses aren’t completed by writing a one-off report. Instead, you will typically produce a living artefact that’s run repeatedly over months or years. This is the challenge of putting your code in production, which currently feels harder than it should be, due to a large number of paper cuts. These include tasks like getting database authentication working when your code is deployed on a server that distracts from your data science tasks. In conjunction with other teams at Posit, I’m convinced we can make many of these problems go away.</p></li>
<li><p><strong>LLMs for data science</strong>. By now, it’s clear that LLMs are going to have a transformative impact on how we do data science. We see them as invaluable assistants for the data scientist, not replacements, tools that allow you to get help where you need it and automate fiddly annoying tasks. Our work in this domain is still very early, but one initiative is the <a href="https://ellmer.tidyverse.org">ellmer package</a> which lets you use LLMs from a variety of providers within R.</p></li>
</ul>
<p>It’s been a lot of fun to look back at the last ~20 years of the tidyverse. What started as a collection of personal solutions to data analysis challenges has grown into something far greater than I could have imagined – a vibrant ecosystem that helps millions of people around the world work more effectively with their data. Our amazing community continues to inspire me daily with their creativity, generosity, and enthusiasm.</p>
<p>Looking ahead, I’m more excited than ever about the future of R and the tidyverse. The emergence of new technologies like LLMs offers fresh opportunities to make data science more accessible and more usable. While the core tidyverse packages may be reaching maturity, there are still countless opportunities to reduce friction, improve consistency, and help people solve real-world problems more effectively.</p>
<p>I still love R, love programming, and most importantly, love working with this incredible community. Here’s to the next 20 years of making data science more approachable, more powerful, and more fun!</p>

</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-lubridate" class="csl-entry" role="listitem">
Grolemund, Garrett, and Hadley Wickham. 2011. <span>“Dates and Times Made Easy with <span class="nocase">lubridate</span>.”</span> <em>Journal of Statistical Software</em> 40 (3): 1–25. <a href="https://www.jstatsoft.org/v40/i03/">https://www.jstatsoft.org/v40/i03/</a>.
</div>
<div id="ref-lattice" class="csl-entry" role="listitem">
Sarkar, Deepayan. 2008. <em>Lattice: Multivariate Data Visualization with r</em>. New York: Springer. <a href="http://lmdvr.r-forge.r-project.org">http://lmdvr.r-forge.r-project.org</a>.
</div>
<div id="ref-tidy-data" class="csl-entry" role="listitem">
Wickham, Hadley. 2014. <span>“Tidy Data.”</span> <em>Journal of Statistical Software</em> 59 (10): 1–23. <a href="https://doi.org/10.18637/jss.v059.i10">https://doi.org/10.18637/jss.v059.i10</a>.
</div>
<div id="ref-tidyverse-welcome" class="csl-entry" role="listitem">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>“Welcome to the Tidyverse.”</span> <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-r4ds-2" class="csl-entry" role="listitem">
Wickham, Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. 2023. <em>R for Data Science</em>. " O’Reilly Media, Inc.".
</div>
<div id="ref-r4ds-1" class="csl-entry" role="listitem">
Wickham, Hadley, and Garrett Grolemund. 2017. <em>R for Data Science</em>. " O’Reilly Media, Inc.".
</div>
<div id="ref-grammar-of-graphics" class="csl-entry" role="listitem">
Wilkinson, Leland. 2012. <em>The Grammar of Graphics</em>. Springer.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>You can read more about him and how he shaped my life at <a href="https://tidydesign.substack.com/p/my-dad-brian-wickham" class="uri">https://tidydesign.substack.com/p/my-dad-brian-wickham</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>She also taught me to bake, which I continue to get great enjoyment from, but I don’t think that has influenced the development of the tidyverse, except for some fun purrr examples.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Compared to today’s equivalent, tidyr, reshape includes a lot of tools for working with high-dimensional arrays. I was initially interested in arrays because they are rather elegant and can be much more memory efficient than data frames. But they only work well for highly crossed experimental designs and I found them very hard to explain to others. My work with arrays largely fell by the wayside once I decided that it was better to standardise on data frames.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Lee also made a throwaway comment about reshaping that led to a vastly more performant implementation that become the heart of reshape2.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>I was supposed to be working on ggobi, a tool for interactively exploring high-dimensional data. This led to a number of R packages including clusterfly and classify that used the rggobi package to get your data from R and into ggobi. I still think this work is incredibly useful and empowering but somehow interactive graphics has failed to have the impact on statistical practice that it really should.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>If I taught this today, I’d call it an Introduction to Data <em>Science</em>.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>roxygen2 was developed by Peter Danenberg and Manuel J. A. Eugster for a Google Summer of Code project in 2008.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Unfortunately, I didn’t spend enough time getting to know data.table at this time. I failed to understand how immensely fast it was and why its syntax was appealing to so many people, which damaged my relationship with its community. Fortunately in the years since I have worked to repair those relationships, particularly thanks to help and advice from Tareef Kawaf in 2019. I’m proud to say that <a href="https://dtplyr.tidyverse.org">dtplyr</a>, the dplyr backend that uses data.table, received a <a href="https://rdatatable-community.github.io/The-Raft/posts/2024-08-01-seal_of_approval-dtplyr/index.html">data.table seal of approval</a>.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>dbplyr is one of my favourite R packages because of it requires both a deep understanding of R and SQL, and an pragmatic approach to generating translations for many different databases.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>e.g.&nbsp;<a href="https://github.com/imanuelcostigan/hadleyverse" class="uri">https://github.com/imanuelcostigan/hadleyverse</a><a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>In June 2016, Winston Chang and I brainstormed a bunch of ideas in slack: shipshape, trim, spruce, dapper, natty, joy-sparking, spiffy, choice, debonair, suave, virile, civil, gallant, pulchritudinous, graceful, well-tempered, deft, fastidious, slick, crack, mellow, mannerly, unctuous, tolerable, glib, fluent, affable, agreeable, stout, dashing, snazzy, boffo, raffish, rakish, swashbuckling, nifty, phat, dandy, sleek.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>We had wanted to add lubridate along with forcats and stringr, but there were a couple of function names that caused conflicts. The process of eliminating these functions without unduly affecting user code took a further five years.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p>According to my web statistics, around 1 million unique visitors and 2.9 million page views in the last year.<a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p>This is certainly not the only data stucture you might ever want to use, but it’s extremely useful to have a organising structure that you can rely on for the majority of your work. It’s a great default, even if you might need other forms for specialised purposes.<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn15"><p>Fun fact: I only realised that tidyr was an anagram of dirty when someone pointed it out on twitter several years later.<a href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn16"><p>The requirement for infix function names to start and end with <code>%</code> comes from R, and there’s no avoiding it without patching R itself.<a href="#fnref16" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn17"><p>Memorable examples of this included posts on the RStudio community forum titled “Should tidyeval be abandoned?” and “Will tidyeval kill the tidyverse?”.<a href="#fnref17" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn18"><p>Stefan and I were clearly thinking many of the same thoughts in 2014!<a href="#fnref18" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn19"><p><a href="https://github.com/max-mapper/hexbin/commits/gh-pages/hexagons/magrittr.png" class="uri">https://github.com/max-mapper/hexbin/commits/gh-pages/hexagons/magrittr.png</a><a href="#fnref19" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn20"><p>I still remember a conversation where I was told to look up a word in the dictionary.<a href="#fnref20" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn21"><p>We include some advice on citing packages in our blog post advertising the paper: <a href="https://www.tidyverse.org/blog/2019/11/tidyverse-1-3-0/" class="uri">https://www.tidyverse.org/blog/2019/11/tidyverse-1-3-0/</a>.<a href="#fnref21" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>